{"name":"Jobber","tagline":"A replacement for cron, with sophisticated status-reporting and error-handling.","body":"# Jobber\r\n\r\nA replacement for cron, with sophisticated status-reporting and error-handling.\r\n\r\n# Table of Contents\r\n*generated with [DocToc](http://doctoc.herokuapp.com/)*\r\n\r\n- [Intro](#intro)\r\n- [Maturity](#maturity)\r\n- [Target Systems](#target-systems)\r\n- [Installation](#installation)\r\n- [Usage](#usage)\r\n\t- [Defining Jobs](#defining-jobs)\r\n\t\t- [Field \"time\"](#field-time)\r\n\t\t- [Fields \"onError\", \"notifyOnError\", and \"notifyOnFailure\"](#fields-onerror-notifyonerror-and-notifyonfailure)\r\n\t- [Loading Jobs](#loading-jobs)\r\n\t- [Listing Jobs](#listing-jobs)\r\n\t- [Listing Runs](#listing-runs)\r\n\t- [Testing Jobs](#testing-jobs)\r\n\r\n# Intro\r\n\r\nJobber is a utility for Unix-like systems that can run arbitrary commands, or \"jobs\", according to a schedule.  It is meant to be a replacement for the classic Unix utility [cron](http://en.wikipedia.org/wiki/Cron).\r\n\r\nAlong with the functionality of cron, Jobber also provides:\r\n* **Job execution history**: you can see what jobs have recently run, and whether they succeeded or failed.\r\n* **Sophisticated error handling**: you can control whether and when a job is run again after it fails.  For example, after an initial failure of a job, Jobber can schedule future runs using an exponential backoff algorithm.\r\n* **Sophisticated error reporting**: you can control whether Jobber notifies you about each failed run, or only about jobs that have been disabled due to repeated failures.\r\n\r\n# Maturity\r\n\r\nJobber is curerntly at a \"beta\" level of maturity.  The largest open task is to do a thorough security review.\r\n\r\n# Target Systems\r\n\r\nJobber is written in [Go](http://golang.org/), and it should be possible to compile and run it on any modern Unix-like system.  However, at this time its installation script targets RHEL, Fedora, and CentOS.  (Actually, it has only been tested on CentOS....)\r\n\r\n# Installation\r\n\r\nYou need a recent version of [Go](http://golang.org/) to compile Jobber.  Once you've installed Go and set up your Go workspace, you can build it thus:\r\n\r\n    cd /path/to/your/workspace\r\n    go get github.com/dshearer/jobber\r\n    make -C src/github.com/dshearer/jobber\r\n\r\nAs mentioned above, Jobber's installation script currently targets RHEL-like systems.  If you are on such a system, you can install Jobber thus:\r\n\r\n    cd /path/to/your/workspace\r\n    sudo make install\r\n\r\n# Usage\r\n\r\n## Defining Jobs\r\n\r\nAs with cron, each user can have its own set of jobs, which will be run under that user's privileges.  A user's jobs are defined in a file named \".jobber\" in the user's home directory.  Jobfiles are written in JSON format.  Here's an example:\r\n\r\n    [\r\n        {\r\n            \"name\": \"DailyBackup\",\r\n            \"cmd\": \"backup daily\",\r\n            \"time\": {\r\n                \"sec\": 0,\r\n                \"min\": 0,\r\n                \"hour\": 13\r\n            },\r\n            \"onError\": \"Stop\",\r\n            \"notifyOnError\": false,\r\n            \"notifyOnFailure\": true\r\n        },\r\n        {\r\n            \"name\": \"WeeklyBackup\",\r\n            \"cmd\": \"backup weekly\",\r\n            \"time\": {\r\n                \"sec\": 0,\r\n                \"min\": 0,\r\n                \"hour\": 14,\r\n                \"wday\": 1\r\n            },\r\n            \"onError\": \"Stop\",\r\n            \"notifyOnError\": false,\r\n            \"notifyOnFailure\": true\r\n        }\r\n    ]\r\n\r\nThis jobfile defines two jobs.  Field \"name\" is self-explanatory.  Field \"cmd\" can contain any shell command.\r\n\r\n### Field \"time\"\r\n\r\nField \"time\" specifies when the job is run, in a manner similar to how cron jobs' schedules are specified.  A job is scheduled thus: at each second, jobber looks at the job's \"time\" field and determines whether all of the subfields that happen to be present match the current time; if so it runs the job, and otherwise it does not.  Thus, \"DailyBackup\" is run whenever the current time is 13:00:00 (i.e., 1 PM), no matter the day, whereas \"WeeklyBackup\" is run whenever the current time is 14:00:00 (i.e., 2 PM) and the current weekday is Monday.  The possible subfields of \"time\" and their value ranges are as follows:\r\n\r\n* \"sec\": 0 &ndash; 59\r\n* \"min\": 0 &ndash; 59\r\n* \"hour\": 0 &ndash; 23\r\n* \"mday\": 1 &ndash; 31\r\n* \"mon\": 1 &ndash; 12\r\n* \"wday\": 1 &ndash; 7\r\n\r\n### Fields \"onError\", \"notifyOnError\", and \"notifyOnFailure\"\r\n\r\nWhen discussnig jobs, by \"job error\" we mean the failure of a particular run of a job, whereas by \"job failure\" we mean a job that jobber has decided not to schedule anymore due to one or more recent job errors.  Jobber considers a run to have failed when the command (in field \"cmd\") returns a non-0 exit status.\r\n\r\nField \"onError\" specifies what jobber will do when a job error occurs.  The possible values:\r\n\r\n* \"Stop\": *Stop scheduling runs of this job.*  That is, a single job error results in a job failure.\r\n* \"Backoff\": *Schedule runs of this job according to an exponential backoff algorithm.*  If a later run of the job succeeds, jobber resumes scheduling this job normally; but if the job fails again on several consecutive runs, jobber stops scheduling it &emdash; that is, the job fails.\r\n* \"Continue\": *Continue scheduling this job normally.*  That is, the job will never fail.\r\n\r\nFields \"notifyOnError\" and \"notifyOnFailure\" control whether the user that owns a job is notified about job errors and job failures.\r\n\r\n## Loading Jobs\r\n\r\nAfter you've created a user's jobfile, log in as that user and do:\r\n\r\n    jobber reload\r\n\r\nYou can also reload all users' jobfiles by logging in as root and doing:\r\n\r\n    jobber reload -a\r\n\r\n## Listing Jobs\r\n\r\nYou can list the jobs for a particular user by logging in as that user and doing\r\n\r\n    jobber list\r\n\r\nThis command also shows you the status of each job &mdash; that is, whether the job is being scheduled as normal, the exponential backoff algorithm is being applied, or the job has failed.\r\n\r\nAs with the \"reload\" command, you can do the same for all users by adding the \"-a\" option as root.\r\n\r\n## Listing Runs\r\n\r\nYou can see a list of recent runs of any jobs for a particular user by logging in as that user and doing\r\n\r\n    jobber log\r\n\r\nAs with the other commands, you can do the same for all users by adding the \"-a\" option as root.\r\n\r\n## Testing Jobs\r\n\r\nIf you'd like to test out a job, do\r\n\r\n    jobber test JOB_NAME\r\n\r\nJobber will immediately run that job, tell you whether it succeeded, and show you its output.\r\n","google":"UA-57172909-1","note":"Don't delete this file! It's used internally to help with page regeneration."}