<section>
  <h3>Doing Stuff with Job Run Output</h3>

  <p>A run of a job results in one of three events:</p>
  <table class="table">
    <tr>
      <td><dfn>Job success</dfn></td>
      <td>The job (or, specifically, the shell script that the job runs)
        exited with status 0</td>
    </tr>
    <tr>
      <td><dfn>Job error</dfn></td>
      <td>The job (or, specifically, the shell script that the job runs)
        exited with a non-0 status</td>
    </tr>
    <tr>
      <td><dfn>Job failure</dfn></td>
      <td>Jobber stopped scheduling runs of the job due to one or more job
        errors</td>
    </tr>
  </table>

  <p>For a partiular job, you can assign <dfn>result sinks</dfn>
   that can do various things with the job&rsquo;s output in response to these
   events.</p>

  <p>Here are the types of result sinks:</p>
  <table class="table">
    <thead>
      <tr><th>Type</th><th>Behavior</th><th>Params</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>system-email</td>
        <td>Sends an email using <code>sendmail</code> to the job&rsquo;s owner
        containing details of the run (e.g., stdout, stderr, exit code).</td>
        <td>None</td>
      </tr>
      <tr>
        <td>stdout</td>
        <td>Writes details of the run (e.g., stdout, stderr, exit code) to
          jobberrunner&rsquo;s stdout.</td>
        <td>
          <table class="table">
            <tr>
              <td><code>data</code></td>
              <td>A list of strings which must be &ldquo;stdout&rdquo; or
                &ldquo;stderr&rdquo;.  This specifies whether the run details
                written to jobberrunner&rsquo;s stdout will contain the run&rsquo;s
                stdout, stderr, or both.</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>socket</td>
        <td>Writes details of the run (e.g., stdout, stderr, exit code) to
          a socket.  This causes jobberrunner to listen for connections on the
        specified socket.  Run details are written to each active connection.
      NOTE: The owning user must have permission to listen to the specified socket or
     make a Unix socket at the specified path.</td>
        <td>
          <table class="table">
            <tr>
              <td><code>proto</code></td>
              <td>A string: &ldquo;tcp&rdquo;, &ldquo;tcp4&rdquo;, &ldquo;tcp6&rdquo;,
                or &ldquo;unix&rdquo;</td>
            </tr>
            <tr>
              <td><code>address</code></td>
              <td>A string: either a port specification like &ldquo;:1234&rdquo;
                (specifying on which port to listen) or a filesystem path
                (specifying where to make the Unix socket).</td>
            </tr>
            <tr>
              <td><code>data</code></td>
              <td>A list of strings which must be &ldquo;stdout&rdquo; or
                &ldquo;stderr&rdquo;.  This specifies whether the run details
                written to the socket will contain the run&rsquo;s
                stdout, stderr, or both.</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>program</td>
        <td>Sends details of the run (e.g., stdout, stderr, exit code) to the
        stdout of a program.</td>
        <td>
          <table class="table">
            <tr>
              <td><code>path</code></td>
              <td>A filesystem path to the program.</td>
            </tr>
            <tr>
              <td><code>runRecFormatVersion</code></td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>filesystem</td>
        <td>Writes the run&squo;s stdout, stderr, or both to the filesystem.
        A path to a directory must be given.  Stdout and stderr will be written
      to separate files with timestamps as names, and these files will be
      organized by job name.  For example:
    <pre>
- /some/dir/
  - JobOne/
    - 1521318351.stdout
    - 1521318351.stderr
    - 1521318411.stdout
    - 1521318411.stderr
    - 1521318471.stdout
    - 1521318471.stderr</pre>

    </td>
        <td>
          <table class="table">
            <tr>
              <td><code>path</code></td>
              <td>A path to a directory.</td>
            </tr>
            <tr>
              <td><code>data</code></td>
              <td>A list of strings which must be &ldquo;stdout&rdquo; or
                &ldquo;stderr&rdquo;.  This specifies whether the stdout, stderr,
              or both will be written.</td>
            </tr>
            <tr>
              <td><code>maxAgeDays</code></td>
              <td>How many days to keep the output files.</td>
            </tr>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
</section>
